# 技能帮小程序后端接口

## 响应

### 当请求成功时，返回以下内容

+ Response 200

        {
            "success": 1,
            "data":
            {
                // 数据
            }
        }

### 当请求失败时，返回以下内容

+ Response 200

        {
            "success": 0,
            "err_msg": "报错信息"
        }
        
## 1.user模块

### 接口列表

[获取当前用户信息](#getCurrentUserInfo) `GET {base_url}/api/user`

[用户注册](#userRegister) `POST {base_url}/api/user`

[修改信息](#userUpdateInfo) `PUT {base_url}/api/user`

[获取他人主页](#getOtherPage) `GET {base_url}/api/otherPage/:user_id`

[注销该账号](#userLogout) `DELETE {base_url}/api/user`  //只是留着，不一定用

### 接口详情

<a name="getCurrentUserInfo"></a>
<span id="getCurrentUserInfo"></span>

### 获取当前用户信息 `GET {base_url}/api/user`

+ Request

        // 无需参数,后端获取当前用户的信息并返回

+ Response 200

        {
            "success": 1,
            "data": {
                        "user_id": 用户内部id,
                        "user_name": "用户名",
                        "wechat": "微信号",
                        "mobile": "手机号",
                        "is_cert": "是否认证",
                        "is_official": "是否是官方号",
                        "nickname": "昵称",
                        "wechat_id": 微信id,
                        "photo": null, 
                        "role": "0", //用户权限 0普通 1管理 2开发者
                        "new_message": "0", // 一代表有新消息
                        "gender": "0",//0男1女
                        "major": "专业",
                        "grade": "年级",
                        "qq": qq,
                        "intro": "个人介绍",
                        "update_time": "2019-03-25 18:44:54",
                        "create_time": "2019-03-25 18:43:52",
                        "delete_time": "0000-00-00 00:00:00"
                }
        }

<a name="userRegister"></a>
<span id="userRegister"></span>

### 用户注册 `POST {base_url}/api/user`

+ Request

        {
            "user_name": "姓名",
            "nickname": "昵称",
            "wechat": "微信号",
            "mobile": "手机",
            "qq" : "QQ",
            "wechat_id": "微信id"
            "gender" : "性别",//0代表男性，1代表女性
            "major" : "专业",
            "grade" : "年级",
            "intro" : "个人介绍" //非必需
        }

+ Response 200

        // 未登录时
        {
            "success": 1
        }


<a name="userUpdateInfo"></a>
<span id="userUpdateInfo"></span>

### 修改信息 `PUT {base_url}/api/user`

+ Request

        //若已经认证，修改姓名和性别无效,前端仍要给原来值
        {
            "user_name": "姓名",
            "nickname": "昵称",
            "wechat": "微信号",
            "mobile": "手机",
            "qq" : "QQ",
            "wechat_id": "微信id"
            "gender" : "性别",//0代表男性，1代表女性
            "major" : "专业",
            "grade" : "年级",
            "intro" : "个人介绍" //非必需
        }

+ Response 200

        {
            "success": 1
        }

<a name="getOtherPage"></a>
<span id="getOtherPage"></span>

### 获取他人主页 `GET {base_url}/api/otherPage/:user_id`

+ Request

        // 无需参数,后端注销当前用户的信息并返回

+ Response 200

        {
        "success": 1,
        "data": {
                "user": {
                "user_id": 16,
                "wechat": "15617366593",
                "mobile": "15617366593",
                "is_cert": "1",
                "is_official": "0",
                "nickname": "chris",
                "photo": null,
                "update_time": "2019-04-20 19:54:29",
                "create_time": "2019-04-20 15:23:10",
                "delete_time": "0000-00-00 00:00:00",
                "role": "2",
                "new_message": "1",
                "gender": "0",
                "major": "计算机",
                "grade": "大二",
                "qq": 1284975112,
                "intro": "我很强啊",
                "score": 0,
                "help_num": 0
                },
                "labels": [
                {
                        "label_id": 2,
                        "user_id": 16,
                        "type": "0",
                        "score": 0,
                        "create_time": "2019-03-26 21:27:17",
                        "update_time": "2019-03-26 21:27:17",
                        "delete_time": "0000-00-00 00:00:00",
                        "description": "真的啊"
                },
                {
                        "label_id": 3,
                        "user_id": 16,
                        "type": "1",
                        "score": 0,
                        "create_time": "2019-03-26 21:27:17",
                        "update_time": "2019-03-26 21:27:17",
                        "delete_time": "0000-00-00 00:00:00",
                        "description": "真的啊"
                },
                ...//显示已有所有标签
                ]
        }
        }


<a name="userLogout"></a>
<span id="userLogout"></span>

### 注销该账号 `DELETE {base_url}/api/user`

+ Request

        // 无需参数,后端注销当前用户的信息并返回

+ Response 200

        {
            "success": 1
        }



## 2.label模块

### 接口列表

[获取本人所有标签](#getCurrentAllLabel) `GET {base_url}/api/labels`

[获取某个标签](#getOneLabel) `GET {base_url}/api/label/:label_id`

[新增标签](#createLabel) `POST {base_url}/api/label`

[修改信息](#updateLabel) `PUT {base_url}/api/label/:label_id`

[删除某个标签](#deleteLabel) `DELETE {base_url}/api/label/:label_id` 

//积分排名部分
//前10
[获取所有标签排名（不包括总积分）](#getAllRank) `GET {base_url}/api/getAllRank` 
//前10
[获取总积分排名](#getScoreSumRank) `GET {base_url}/api/getScoreSumRank` 
//前30显示
[获取我的排名和积分](#myRank) `GET {base_url}/api/myRank` 


### 接口详情

<a name="getCurrentAllLabel"></a>
<span id="getCurrentAllLabel"></span>

### 获取本人所有标签 `GET {base_url}/api/labels`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "label_id": 标签id,
                        "user_id": 8,
                        "type": "类型",
                        "score": 得分,
                        "create_time": "2019-03-26 21:27:11",
                        "update_time": "2019-03-26 21:27:11",
                        "delete_time": "0000-00-00 00:00:00",
                        "description": "描述"
                        },
                        {
                        "label_id": 标签id,
                        "user_id": 8,
                        "type": "类型",
                        "score": 得分,
                        "create_time": "2019-03-26 21:27:11",
                        "update_time": "2019-03-26 21:27:11",
                        "delete_time": "0000-00-00 00:00:00",
                        "description": "描述"
                        }
                ]
        }


<a name="getOneLabel"></a>
<span id="getOneLabel"></span>

### 获取某个标签 `GET {base_url}/api/label/:label_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

   
        {
            "success": 1,
            "data": {
                "label_id": 标签id,
                "user_id": 8,
                "type": "类型",
                "score": 得分,
                "create_time": "2019-03-26 21:27:11",
                "update_time": "2019-03-26 21:27:11",
                "delete_time": "0000-00-00 00:00:00",
                "description": "描述"               
            }
        }


<a name="createLabel"></a>
<span id="createLabel"></span>

### 新增标签 `POST {base_url}/api/label`

+ Request

        {
            "type": "标签类型",
            "description": "标签描述"
        }

+ Response 200

        // 未登录时
        {
            "success": 1
        }


<a name="updateLabel"></a>
<span id="updateLabel"></span>

### 修改标签 `PUT {base_url}/api/label/:label_id`

+ Request

        {
            "description": "标签描述" //只能修改描述，不能更改类型
        }

+ Response 200

        {
            "success": 1
        }


<a name="deleteLabel"></a>
<span id="deleteLabel"></span>

### 删除标签 `DELETE {base_url}/api/label/:label_id`

+ Request

        // 无需参数

+ Response 200

        {
            "success": 1
        }

<a name="getAllRank"></a>
<span id="getAllRank"></span>

### 获取所有标签排名 `GET {base_url}/api/getAllRank`

+ Request

        // 无需参数

+ Response 200

        {
        "success": 1,
        "data": [
                [
                {
                        "user_name": "贾成铕1",
                        "label_id": 1,
                        "user_id": 15,
                        "type": "1",
                        "score": 10,
                        "create_time": "2019-03-26 21:27:11",
                        "update_time": "2019-04-20 20:00:27",
                        "delete_time": "0000-00-00 00:00:00",
                        "description": "真的啊"
                }...//10个
                ],
                [
                {
                        "user_name": "贾成铕",
                        "label_id": 6,
                        "user_id": 16,
                        "type": "2",
                        "score": 3,
                        "create_time": "2019-04-20 19:29:02",
                        "update_time": "2019-04-20 19:29:02",
                        "delete_time": "0000-00-00 00:00:00",
                        "description": "真的啊"
                }...//10个
                ],
                [
                ...//10个
                ],
                [
                ...//10个
                ]
        ]
        }
 
<a name="getScoreSumRank"></a>
<span id="getScoreSumRank"></span>

### 获取总积分排名 `GET {base_url}/api/getScoreSumRank` 

+ Request

        // 无需参数

+ Response 200

        {
        "success": 1,
        "data": [
                {
                "user_id": 15,
                "user_name": "贾成铕1",
                "wechat": "15617366593",
                "mobile": "15617366593",
                "is_cert": "1",
                "is_official": "0",
                "nickname": "chris",
                "wechat_id": 11,
                "photo": null,
                "update_time": "2019-04-20 20:00:27",
                "create_time": "2019-04-20 15:08:39",
                "delete_time": "0000-00-00 00:00:00",
                "role": "0",
                "new_message": "1",
                "gender": "1",
                "major": "计算机",
                "grade": "大二",
                "qq": 1284975112,
                "intro": "",
                "score": 5,
                "help_num": 0
                }.../10个
                ]
        }


<a name="myRank"></a>
<span id="myRank"></span>

###获取我的排名和积分 `GET {base_url}/api/myRank` 

+ Request

        // 无需参数

+ Response 200 

        {
        "success": 1,
        "data": {
                "help_num": 0,
                "rank": [
                {
                        "rank": 2,
                        "score": 0
                },
                {
                        "rank": 4,
                        "score": 0
                },
                {
                        "rank": 1,
                        "score": 3
                },
                {
                        "rank": 1,
                        "score": 2
                },
                {
                        "rank": 1,
                        "score": 0
                }
                ]
        }
        }


## 3.help模块

### 接口列表

[获取本人所有求助](#getCurrentAllHelp) `GET {base_url}/api/helps`

[获取某个求助](#getOnehelp) `GET {base_url}/api/help/:help_id`

[新增求助](#createhelp) `POST {base_url}/api/help`

[修改信息](#updatehelp) `PUT {base_url}/api/help/:help_id`

[删除某个求助](#deletehelp) `DELETE {base_url}/api/help/:help_id` 

[投诉某个求助](#complaintHelp) `PUT {base_url}/api/complaintHelp/:help_id`

[为某个求助点赞](#helpLike) `PUT {base_url}/api/helpLike/:help_id`

[获取所有求助](#GetAllHelp) `GET {base_url}/api/getAllHelps`

[根据关键字查询求助](#getHelpsByWord) `GET {base_url}/api/getHelpsByWord`


//admin

[获取所有求助](#adminGetHelp) `GET {base_url}/api/admin/help`

[删除某个求助](#adminDeleteHelp) `DELETE {base_url}/api/admin/help/:help_id` 



### 接口详情

<a name="getCurrentAllhelp"></a>
<span id="getCurrentAllhelp"></span>

### 获取本人所有求助 `GET {base_url}/api/helps`

+ Request

        {
            "has_finished" : "0或1"/0为未完成,1为已完成
        }

+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        },
                        {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        }
                ]
        }


<a name="getOnehelp"></a>
<span id="getOnehelp"></span>

### 获取某个求助 `GET {base_url}/api/help/:help_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

   
        {
            "success": 1,
            "data": {
                "help_id": 12,
                "user_id": 8,
                "content": "求学霸辅导",
                "picture": null,
                "browse": 1,
                "like": 0,
                "reply": 0,
                "apply_num": 0,
                "create_time": "2019-04-11 10:24:06",
                "update_time": "2019-04-11 10:27:10",
                "delete_time": "0000-00-00 00:00:00",
                "is_free": "1",
                "askfor_type": "1",
                "is_complaint": "0",
                "type": "0",
                "title": "我是标题啊",
                "has_finished": "0",
                "publisher": "2"           
            }
        }


<a name="createhelp"></a>
<span id="createhelp"></span>

### 新增求助 `POST {base_url}/api/help`

+ Request

        {
            "title":"标题",
            "content": "内容",
            "picture": "图片",//只能一张，可以为空
            "is_free": "是否有酬" ,//0代表有酬，1代表无酬
            "askfor_type": "求助类型" ,
            "type":"类型" , //0为需要个人，1为需要多人
        }

+ Response 200

        // 未登录时
        {
            "success": 1
        }


<a name="updatehelp"></a>
<span id="updatehelp"></span>

### 修改求助 `PUT {base_url}/api/help/:help_id`

+ Request

        {
            "title":"标题",
            "content": "内容",
            "picture": "图片",//只能一张，可以为空
            "is_free": "是否有酬" ,//0代表有酬，1代表无酬
            "askfor_type": "求助类型",    
            "type":"类型" , //0为需要个人，1为需要多人
        }

+ Response 200

        {
            "success": 1
        }


<a name="deletehelp"></a>
<span id="deletehelp"></span>

### 删除求助 `DELETE {base_url}/api/help/:help_id`

+ Request

        // 无需参数

+ Response 200

        {
            "success": 1
        }


<a name="complaintHelp"></a>
<span id="complaintHelp"></span>

### 投诉某个求助 `PUT {base_url}/api/complaintHelp/:help_id`


+ Request

        //无

+ Response 200

        {
            "success": 1
        }

<a name="helpLike"></a>
<span id="helpLike"></span>

### 求助点赞 `PUT {base_url}/api/helpLike/:help_id`

+ Request

        //无

+ Response 200

        {
            "success": 1
        }

<a name="getHelpsByWord"></a>
<span id="getHelpsByWord"></span>

### 根据关键字查询求助  `GET {base_url}/api/getHelpsByWord`


+ Request

        {
            "word" : "关键字",
            "page": "页数",
            "limit": "限制"
        }
+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        },
                        {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        }
                ]
        }

<a name="GetAllHelp"></a>
<span id="GetAllHelp"></span>

### 获取所有求助  `GET {base_url}/api/getAllHelps`


+ Request

        {
            //建议前端默认都设为all
            "is_free": "是否有酬" ,//0代表有酬，1代表无酬，2代表工时，3代表其他//all表示所有
            "askfor_type": "求助类型", //all表示所有
            "publisher":"发布方" ,  //all表示所有
            "page": "页数",
            "limit": "限制"
        }
+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        },
                        {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        }
                ]
        }



<a name="adminGetHelp"></a>
<span id="adminGetHelp"></span>

### 获取所有求助 `GET {base_url}/api/admin/help`

+ Request

        {
                mode:"类型",// all表示获取所有,1表示只获取被投诉的
                "page": "页数",//从第一页开始
                "limit": "限制数目"
        }

+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        },
                        {
                        "help_id": 12,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 1,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "create_time": "2019-04-11 10:24:06",
                        "update_time": "2019-04-11 10:27:10",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_free": "1",
                        "askfor_type": "1",
                        "is_complaint": "0",
                        "type": "0",
                        "title": "我是标题啊",
                        "has_finished": "0",
                        "publisher": "2"    
                        }
                ]
        }



<a name="adminDeleteHelp"></a>
<span id="adminDeleteHelp"></span>

### 删除某个求助 `DELETE {base_url}/api/admin/help/:help_id` 

+ Request

        //无

+ Response 200

        {
            "success": 1
        }


## 4.helpComment模块

### 接口列表

[获取此helpid下的所有求助评论](#getCurrentAllhelpComment) `GET {base_url}/api/help_comments/:help_id`

[获取某个求助评论](#getOnehelpComment) `GET {base_url}/api/help_comment/:help_comment_id`

[新增求助评论](#createhelpComment) `POST {base_url}/api/help_comment`

[删除某个求助评论](#deletehelpComment) `DELETE {base_url}/api/help_comment/:help_comment_id` 

### 接口详情

<a name="getCurrentAllhelpComment"></a>
<span id="getCurrentAllhelpComment"></span>

### 获取此helpid下的所有求助评论 `GET {base_url}/api/help_comments/:help_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "help_comment_id": 42,
                        "user_id": 8,
                        "content": "0",
                        "prior": 39,
                        "help_id": 4,
                        "create_time": "2019-03-28 11:43:21",
                        "update_time": "2019-03-28 11:43:21",
                        "delete_time": "0000-00-00 00:00:00",
                        },
                        {
                        "help_comment_id": 42,
                        "user_id": 8,
                        "content": "0",
                        "prior": 39,
                        "help_id": 4,
                        "create_time": "2019-03-28 11:43:21",
                        "update_time": "2019-03-28 11:43:21",
                        "delete_time": "0000-00-00 00:00:00",
                        }
                ]
        }


<a name="getOnehelpComment"></a>
<span id="getOnehelpComment"></span>

### 获取某个求助评论 `GET {base_url}/api/help_comment/:help_comment_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

   
        {
            "success": 1,
            "data": {
                "help_comment_id": 42,
                "user_id": 8,
                "content": "0",
                "prior": 39,
                "help_id": 4,
                "create_time": "2019-03-28 11:43:21",
                "update_time": "2019-03-28 11:43:21",
                "delete_time": "0000-00-00 00:00:00",            
            }
        }


<a name="createhelpComment"></a>
<span id="createhelpComment"></span>

### 新增求助评论 `POST {base_url}/api/help_comment`

+ Request

        {
            "content": "内容",
            "help_id": "求助id",
            "prior": "前驱" ,//无前驱评论不填
        }

+ Response 200

        // 未登录时
        {
            "success": 1
        }



<a name="deletehelpComment"></a>
<span id="deletehelpComment"></span>

### 删除求助评论 `DELETE {base_url}/api/help_comment/:help_comment_id`

+ Request

        // 无需参数 
        //非前驱评论直接删除，前驱评论删除它的全部后继及其自身

+ Response 200

        {
            "success": 1
        }


## 5.question模块

### 接口列表

[获取本人所有提问](#getCurrentAllquestion) `GET {base_url}/api/questions`

[获取某个提问](#getOnequestion) `GET {base_url}/api/question/:question_id`

[新增提问](#createquestion) `POST {base_url}/api/question`

[修改信息](#updatequestion) `PUT {base_url}/api/question/:question_id`

[删除某个提问](#deletequestion) `DELETE {base_url}/api/question/:question_id` 

[投诉某个提问](#complaintQuestion) `PUT {base_url}/api/complaintQuestion/:question_id`

[为某个提问点赞](#questionLike) `PUT {base_url}/api/questionLike/:question_id`

[获取所有提问](#GetAllQuestion) `GET {base_url}/api/getAllQuestions`

[根据关键字查询求助](#getQuestionsByWord) `GET {base_url}/api/getQuestionsByWord`

//admin

[获取所有提问](#adminGetQuestion) `GET {base_url}/api/admin/question`

[删除某个提问](#adminDeleteQuestion) `DELETE {base_url}/api/admin/question/:question_id` 

### 接口详情

<a name="getCurrentAllquestion"></a>
<span id="getCurrentAllquestion"></span>

### 获取本人所有提问 `GET {base_url}/api/questions`

+ Request

        {
            "type": "类型" ,//0提问 1吐槽 2表白 3其他 //all表示所有
        }

+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "question_id": 12,
                        "user_id": 7,
                        "type": "0",
                        "content": "0",
                        "picture": null,
                        "like": 9,
                        "browse": 0,
                        "reply": 0,
                        "create_time": "2019-03-28 14:21:02",
                        "update_time": "2019-03-28 14:21:02",
                        "delete_time": "0000-00-00 00:00:00"
                        },
                        {
                        "question_id": 12,
                        "user_id": 7,
                        "type": "0",
                        "content": "0",
                        "picture": null,
                        "like": 9,
                        "browse": 0,
                        "reply": 0,
                        "create_time": "2019-03-28 14:21:02",
                        "update_time": "2019-03-28 14:21:02",
                        "delete_time": "0000-00-00 00:00:00"
                        }
                ]
        }


<a name="getOnequestion"></a>
<span id="getOnequestion"></span>

### 获取某个提问 `GET {base_url}/api/question/:question_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

   
        {
            "success": 1,
            "data": {
                "nickname": "chris",
                "question_id": 12,
                "user_id": 7,
                "type": "0",
                "content": "0",
                "picture": null,
                "like": 9,
                "browse": 0,
                "reply": 0,
                "is_anonymous": "0",
                "title": "",
                "create_time": "2019-03-28 14:21:02",
                "update_time": "2019-03-28 14:21:02",
                "delete_time": "0000-00-00 00:00:00"             
            }
        }


<a name="createquestion"></a>
<span id="createquestion"></span>

### 新增提问 `POST {base_url}/api/question`

+ Request

        {
            "content": "内容",
            "picture": "图片",//只能一张，可以为空
            "type" : "类型" , 
            "title": "标题", 
            "is_anonymous" : "是否匿名 0非1匿"
        }

+ Response 200

        // 未登录时
        {
            "success": 1
        }


<a name="updatequestion"></a>
<span id="updatequestion"></span>

### 修改提问 `PUT {base_url}/api/question/:question_id`

+ Request

        {
            "content": "内容",
            "picture": "图片",//只能一张，可以为空  
            "type" : "类型"  ,
            "title": "标题", 
            "is_anonymous" : "是否匿名 0非1匿"                                                                     
        }

+ Response 200

        {
            "success": 1
        }


<a name="deletequestion"></a>
<span id="deletequestion"></span>

### 删除提问 `DELETE {base_url}/api/question/:question_id`

+ Request

        // 无需参数

+ Response 200

        {
            "success": 1
        }

<a name="complaintQuestion"></a>
<span id="complaintQuestion"></span>

### 投诉某个提问 `PUT {base_url}/api/complaintQuestion/:question_id`


+ Request

        //无

+ Response 200

        {
            "success": 1,
        }


<a name="questionLike"></a>
<span id="questionLike"></span>

### 提问点赞 `PUT {base_url}/api/questionLike/:question_id`

+ Request

        //无

+ Response 200

        {
            "success": 1
        }

<a name="getQuestionsByWord"></a>
<span id="getQuestionsByWord"></span>

### 根据关键字查询求助  `GET {base_url}/api/getQuestionsByWord`

+ Request

        {
            "word" : "关键字",
            "page": "页数",
            "limit": "限制"
        }
+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "nickname": "chris",
                        "question_id": 12,
                        "user_id": 7,
                        "type": "0",
                        "content": "0",
                        "picture": null,
                        "like": 9,
                        "browse": 0,
                        "reply": 0,
                        "is_anonymous": "0",
                        "title": "",
                        "create_time": "2019-03-28 14:21:02",
                        "update_time": "2019-03-28 14:21:02",
                        "delete_time": "0000-00-00 00:00:00"    
                        },
                        {
                        "nickname": "chris",
                        "question_id": 12,
                        "user_id": 7,
                        "type": "0",
                        "content": "0",
                        "picture": null,
                        "like": 9,
                        "browse": 0,
                        "reply": 0,
                        "is_anonymous": "0",
                        "title": "",
                        "create_time": "2019-03-28 14:21:02",
                        "update_time": "2019-03-28 14:21:02",
                        "delete_time": "0000-00-00 00:00:00"     
                        }
                ]
        }

<a name="GetAllQuestion"></a>
<span id="GetAllQuestion"></span>

### 获取所有提问  `GET {base_url}/api/getAllQuestions`


+ Request

        {
            //建议前端默认都设为all
            "type": "类型" ,//0提问 1吐槽 2表白 3其他 //all表示所有
            "is_anonymous":"是否匿名 0非1匿" , //all表示所有
            "page": "页数",//从第一页开始
            "limit": "限制数目"
        }
+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "question_id": 12,
                        "user_id": 7,
                        "type": "0",
                        "content": "0",
                        "picture": null,
                        "like": 9,
                        "browse": 0,
                        "reply": 0,
                        "is_anonymous": "0",
                        "title": "",
                        "create_time": "2019-03-28 14:21:02",
                        "update_time": "2019-03-28 14:21:02",
                        "delete_time": "0000-00-00 00:00:00"    
                        },
                        {
                        "question_id": 12,
                        "user_id": 7,
                        "type": "0",
                        "content": "0",
                        "picture": null,
                        "like": 9,
                        "browse": 0,
                        "reply": 0,
                        "is_anonymous": "0",
                        "title": "",
                        "create_time": "2019-03-28 14:21:02",
                        "update_time": "2019-03-28 14:21:02",
                        "delete_time": "0000-00-00 00:00:00"   
                        }
                ]
        }




<a name="adminGetQuestion"></a>
<span id="adminGetQuestion"></span>

### 获取所有提问 `GET {base_url}/api/admin/question`

+ Request

        {
                mode:"类型",// all表示获取所有,1表示只获取被投诉的
                "page": "页数",//从第一页开始
                "limit": "限制数目"
        }

+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "question_id": 4,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 0,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "is_free": "1",
                        "askfor_type": "0"
                        "create_time": "2019-03-26 22:33:47",
                        "update_time": "2019-03-26 22:33:47",
                        "delete_time": "0000-00-00 00:00:00",
                        },
                        {
                        "question_id": 4,
                        "user_id": 8,
                        "content": "求学霸辅导",
                        "picture": null,
                        "browse": 0,
                        "like": 0,
                        "reply": 0,
                        "apply_num": 0,
                        "is_free": "1",
                        "askfor_type": "0"
                        "create_time": "2019-03-26 22:33:47",
                        "update_time": "2019-03-26 22:33:47",
                        "delete_time": "0000-00-00 00:00:00",
                        }
                ]
        }



<a name="adminDeleteQuestion"></a>
<span id="adminDeleteQuestion"></span>

### 删除某个提问 `DELETE {base_url}/api/admin/question/:question_id` 

+ Request

        //无

+ Response 200

        {
            "success": 1
        }



## 6.questionComment模块

### 接口列表

[获取questionid下所有提问评论](#getCurrentAllquestionComment) `GET {base_url}/api/question_comments/:question_id`

[获取某个提问评论](#getOnequestionComment) `GET {base_url}/api/question_comment/:question_comment_id`

[新增提问评论](#createquestionComment) `POST {base_url}/api/question_comment`

[删除某个提问评论](#deletequestionComment) `DELETE {base_url}/api/question_comment/:question_comment_id` 

### 接口详情

<a name="getCurrentAllquestionComment"></a>
<span id="getCurrentAllquestionComment"></span>

### 获取questionid下所有提问评论 `GET {base_url}/api/question_comments/:question_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

        {
            "success": 1,
            "data": [
                       {
                        "question_comment_id": 42,
                        "user_id": 8,
                        "content": "0",
                        "prior": 39,
                        "question_id": 4,
                        "create_time": "2019-03-28 11:43:21",
                        "update_time": "2019-03-28 11:43:21",
                        "delete_time": "0000-00-00 00:00:00",
                        },
                        {
                        "question_comment_id": 42,
                        "user_id": 8,
                        "content": "0",
                        "prior": 39,
                        "question_id": 4,
                        "create_time": "2019-03-28 11:43:21",
                        "update_time": "2019-03-28 11:43:21",
                        "delete_time": "0000-00-00 00:00:00",
                        }
                ]
        }


<a name="getOnequestionComment"></a>
<span id="getOnequestionComment"></span>

### 获取某个提问评论 `GET {base_url}/api/question_comment/:question_comment_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

   
        {
            "success": 1,
            "data": {
                "question_comment_id": 42,
                "user_id": 8,
                "content": "0",
                "prior": 39,
                "question_id": 4,
                "create_time": "2019-03-28 11:43:21",
                "update_time": "2019-03-28 11:43:21",
                "delete_time": "0000-00-00 00:00:00",            
            }
        }


<a name="createquestionComment"></a>
<span id="createquestionComment"></span>

### 新增提问评论 `POST {base_url}/api/question_comment`

+ Request

        {
            "content": "内容",
            "question_id": "提问id",
            "prior": "前驱" ,//无前驱评论不填
        }

+ Response 200

        // 未登录时
        {
            "success": 1
        }



<a name="deletequestionComment"></a>
<span id="deletequestionComment"></span>

### 删除提问评论 `DELETE {base_url}/api/question_comment/:question_comment_id`

+ Request

        // 无需参数 
        //非前驱评论直接删除，前驱评论删除它的全部后继及其自身

+ Response 200

        {
            "success": 1
        }


## apply报名模块

### 接口列表

[用户报名](#userApply) `POST {base_url}/api/apply/:help_id`

[用户取消报名](#userCancelApply) `DELETE {base_url}/api/apply/:apply_id`

[查看某条求助报名](#getHelpApply) `GET {base_url}/api/apply/:help_id`

[检测是否已经报名该求助](#isApply) `GET {base_url}/isApply/:help_id`

[查看我的报名](#getMyApply) `GET {base_url}/api/apply`

[报名确认完成](#applyConfirm) `PUT {base_url}/api/applyConfirm/:help_id`


### 接口详情


<a name="userApply"></a>
<span id="userApply"></span>

### 用户报名 `POST {base_url}/api/apply/:help_id`

+ Request

        {
            "content": "报名描述"
        }

+ Response 200

<a name="userCancelApply"></a>
<span id="userCancelApply"></span>

### 用户取消报名 `DELETE {base_url}/api/apply/:apply_id`

+ Request

        // 不需要任何参数，后端将无视参数

+ Response 200

        {
                "success": 1
        }

<a name="getHelpApply"></a>
<span id="getHelpApply"></span>

###  查看某条求助报名 `GET {base_url}/api/apply/:help_id`

+ Request

        // 不需要任何参数，后端将无视参数

+ Response 200

        {
        "success": 1,
        "data": [
                {
                "nickname": "chris",
                "apply_id": 10,
                "user_id": 8,
                "help_id": 9,
                "status": "1",
                "score": 0,
                "content": "内容",
                "create_time": "2019-04-09 22:29:07",
                "update_time": "2019-04-10 13:51:23",
                "delete_time": "0000-00-00 00:00:00"
                }
                ...
        ]
        }

<a name="isApply"></a>
<span id="isApply"></span>

### 检测是否已经报名该求助 `GET {base_url}/isApply/:help_id`

+ Request

        // 不需要任何参数，后端将无视参数

+ Response 200

        {
            "success": 1,
            "data": false //true表示已报名，false表示未报名
        }

<a name="getMyApply"></a>
<span id="getMyApply"></span>

### 查看我的报名 `GET {base_url}/api/apply`

+ Request

        // 不需要任何参数，后端将无视参数

+ Response 200

        {
        "success": 1,
        "data": [
                {
                "apply_id": 10,
                "user_id": 8,
                "help_id": 9,
                "status": "1",
                "score": 0,
                "content": "内容",
                "create_time": "2019-04-09 22:29:07",
                "update_time": "2019-04-10 13:51:23",
                "delete_time": "0000-00-00 00:00:00"
                }
                ...
        ]
        }

<a name="applyConfirm"></a>
<span id="applyConfirm"></span>

### 报名确认完成 `PUT {base_url}/api/applyConfirm/:help_id`


+ Request

        {
            "apply_id": "报名id",
            "score": "分数"            
        }
+ Response 200

        {
                "success": 1
        }


## suggestion模块

### 接口列表

[获取本人所有建议](#getCurrentAllsuggestion) `GET {base_url}/api/suggestions`

[获取某个建议](#getOnesuggestion) `GET {base_url}/api/suggestion/:suggestion_id`

[新增建议](#createsuggestion) `POST {base_url}/api/suggestion`

[删除某个建议](#deletesuggestion) `DELETE {base_url}/api/suggestion/:suggestion_id` 

//管理员

[回复](#reaplySuggestion) `PUT {base_url}/api/admin/suggestion/reply/:suggestion_id` 

### 接口详情

<a name="getCurrentAllsuggestion"></a>
<span id="getCurrentAllsuggestion"></span>

### 获取本人所有建议 `GET {base_url}/api/suggestions`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

        {
        "success": 1,
        "data": {
                "total": 4,
                "data": [
                {
                        "suggestion_id": 1,
                        "user_id": 8,
                        "content": "网站太烂了",
                        "create_time": "2019-04-10 15:07:53",
                        "update_time": "2019-04-10 15:07:53",
                        "delete_time": "0000-00-00 00:00:00",
                        "reply": null,
                        "status": "0"
                },
                {
                        "suggestion_id": 2,
                        "user_id": 8,
                        "content": "网站太烂了",
                        "create_time": "2019-04-10 15:08:54",
                        "update_time": "2019-04-10 15:08:54",
                        "delete_time": "0000-00-00 00:00:00",
                        "reply": null,
                        "status": "0"
                },
                {
                        "suggestion_id": 3,
                        "user_id": 8,
                        "content": "网站太烂了",
                        "create_time": "2019-04-10 15:08:55",
                        "update_time": "2019-04-10 15:08:55",
                        "delete_time": "0000-00-00 00:00:00",
                        "reply": null,
                        "status": "0"
                },
                {
                        "suggestion_id": 4,
                        "user_id": 8,
                        "content": "网站太烂了",
                        "create_time": "2019-04-10 15:08:56",
                        "update_time": "2019-04-10 15:08:56",
                        "delete_time": "0000-00-00 00:00:00",
                        "reply": null,
                        "status": "0"
                }
                ]
        }
        }


<a name="getOnesuggestion"></a>
<span id="getOnesuggestion"></span>

### 获取某个建议 `GET {base_url}/api/suggestion/:suggestion_id`

+ Request

        // 无需参数,后端获取信息并返回

+ Response 200

   
        {
                "success": 1,
                "data": [
                        {
                        "suggestion_id": 1,
                        "user_id": 8,
                        "content": "网站太烂了",
                        "create_time": "2019-04-10 15:07:53",
                        "update_time": "2019-04-10 15:07:53",
                        "delete_time": "0000-00-00 00:00:00",
                        "reply": null,
                        "status": "0"
                        }
                ]
        }

<a name="createsuggestion"></a>
<span id="createsuggestion"></span>

### 新增建议 `POST {base_url}/api/suggestion`

+ Request

        {
            "content": "建议内容"
        }

+ Response 200

        // 未登录时
        {
            "success": 1
        }


<a name="deletesuggestion"></a>
<span id="deletesuggestion"></span>

### 删除建议 `DELETE {base_url}/api/suggestion/:suggestion_id`

+ Request

        // 无需参数

+ Response 200

        {
            "success": 1
        }


<a name="reaplySuggestion"></a>
<span id="reaplySuggestion"></span>

### 回复 `PUT {base_url}/api/admin/suggestion/reply/:suggestion_id`

+ Request

        {
            "reply": "回复内容"
        }

+ Response 200

        {
            "success": 1
        }


## message模块

### 接口列表

[获取本人所有消息](#getCurrentAllmessage) `GET {base_url}/api/messages`

[获取某个消息](#getOnemessage) `GET {base_url}/api/message/:message_id`

[全部已读](#allRead) `PUT {base_url}/api/message/allRead`



### 接口详情

<a name="getCurrentAllmessage"></a>
<span id="getCurrentAllmessage"></span>

### 获取本人所有消息 `GET {base_url}/api/messages`

+ Request

        {
           "status": "获取不同状态消息"//0代表所有未读，1代表所有已读，all代表所有
        }

+ Response 200

        {
        "success": 1,
        "data": {
                "total": 3,
                "data": [
                {
                        "message_id": 4,
                        "user_id": 8,
                        "content": "你的求助有人报名了，快去查看吧",
                        "create_time": "2019-04-10 14:19:04",
                        "update_time": "2019-04-10 18:38:34",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_office": "1",
                        "status": "1"
                },
                {
                        "message_id": 5,
                        "user_id": 8,
                        "content": "你的求助有人报名了，快去查看吧",
                        "create_time": "2019-04-10 14:21:21",
                        "update_time": "2019-04-10 14:21:21",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_office": "1",
                        "status": "0"
                },
                {
                        "message_id": 6,
                        "user_id": 8,
                        "content": "你的求助有人报名了，快去查看吧",
                        "create_time": "2019-04-10 14:21:44",
                        "update_time": "2019-04-10 14:21:44",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_office": "1",
                        "status": "0"
                }
                ]
        }
        }


<a name="getOnemessage"></a>
<span id="getOnemessage"></span>

### 获取某个消息 `GET {base_url}/api/message/:message_id`

+ Request

        // 无需参数

+ Response 200

        {
                "success": 1,
                "data": {
                        "message_id": 4,
                        "user_id": 8,
                        "content": "你的求助有人报名了，快去查看吧",
                        "create_time": "2019-04-10 14:19:04",
                        "update_time": "2019-04-10 18:38:34",
                        "delete_time": "0000-00-00 00:00:00",
                        "is_office": "1",
                        "status": "1"
                }
        }

### 全部已读 `PUT {base_url}/api/message/allRead`

+ Request

        //无需参数

+ Response 200

        {
            "success": 1
        }

## cas认证模块

### 接口列表

用户登录 `POST {base_url}/api/cas`

用户登录回调认证 `POST {base_url}/api/cas/callback`


### 接口详情


### 用户登录 `POST {base_url}/api/cas`

+ Request

        // 不需要任何参数，后端将无视参数

+ Response 200

        {
                "success": 1,
                "data": "redierctUrl"
        }

### 用户登录回调 `POST {base_url}/api/cas/callback`

+ Request

        {
                "guid":"guid"
        }

+ Response 200

        {
                "success": 1
        }
